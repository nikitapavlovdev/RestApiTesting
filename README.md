# Testing Task

## Описание
Web API для загрузки рекламных площадок и поиска по маршрутам.  
API реализовано с использованием **Minimal API**.  

## Как запустить проект

1. Склонировать проект на локальную машину
```bash
   git clone https://github.com/nikitapavlovdev/RestApiTesting.git
```
2. Открыть решение `EfMobWebApiApp.sln`, в котором содержится два проекта: `EfMobApiTest.csproj` и `EfMobWebApiApp.csproj`.

3. Перейти в папку с проектом `EfMobWebApiApp.csproj`:
```bash
cd .\EfMobWebApiApp\
```
4. Собрать и запустить проекта
```bash
dotnet run 
```
5. По умолчанию сервер доступен по адресу `http://localhost:5207`.

## Эндпоинты

### Загрузка файла с площадками и маршрутами
`POST http://localhost:5207/efmob/upload`

Поддерживаются 2 варианта:
* Загрузка файла (form-data)
* Raw Text (text/plain)

Если файл с текстом или сам текст не были переданы, сервис загрузит дефолтный файл из проекта:

`Data/plat_and_routes.txt`

Пример ответа:
```json
{
  "success": true,
  "message": "Файл успешно загружен",
  "status": "Успех"
}
```
Комментарий про передачу файла 
```csharp
/* Через Postman у меня не получилось протестировать загрузку локального файла (он не подгружался корректно в multipart/form-data).
Поэтому этот сценарий я проверить не смог.

Зато при передаче raw-текста в формате text/plain всё работает стабильно.
Таким образом, API гарантированно поддерживает загрузку через raw text, а также работу с файлом, если он будет отправлен корректно (например, через другой клиент или напрямую из кода). */
```

### Поиск по маршруту
`GET http://localhost:5207/efmob/search?route=/ru `

`route` - обязательный параметр с маршрутом

**Ответ сервера**
```json
{
    "data": [
        "Яндекс.Директ"
    ],
    "success": true,
    "message": "Поиск выполнен успешно",
    "status": "Успех"
}
```

